<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

	<changeSet id="1" author="jonas">
		<createTable tableName="device">
			<column name="id" type="INTEGER" autoIncrement="true">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="internal_id" type="VARCHAR(50)">
				<constraints nullable="false" />
			</column>
			<column name="name" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
			<column name="type" type="VARCHAR(100)">
				<constraints nullable="false" />
			</column>
			<column name="description" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
			<column name="active" type="BIT" defaultValueBoolean="true">
				<constraints nullable="false" />
			</column>
			<column name="added" type="TIMESTAMP">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>
	
	<changeSet id="2" author="jonas">
		<createTable tableName="trigger_abstract">
			<column name="id" type="INTEGER" autoIncrement="true">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="name" type="VARCHAR(150)">
				<constraints nullable="false" />
			</column>
			<column name="new_value" type="INTEGER">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>
	
	<changeSet id="3" author="jonas">
		<createTable tableName="device__trigger_abstract">
			<column name="device_id" type="INTEGER">
				<constraints nullable="false" references="device(id)" foreignKeyName="fk_device__trigger_abstract-device" />
			</column>
			<column name="trigger_abstract_id" type="INTEGER">
				<constraints nullable="false" references="trigger_abstract(id)" foreignKeyName="fk_device__trigger_abstract-trigger_abstract" />
			</column>
		</createTable>
	</changeSet>
	
	<changeSet id="4" author="jonas">
		<createTable tableName="history_point">
			<column name="id" type="INTEGER" autoIncrement="true">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="device_id" type="INTEGER">
				<constraints nullable="false" references="device(id)" foreignKeyName="fk_history_point-device" />
			</column>
			<column name="registered" type="TIMESTAMP">
				<constraints nullable="false" />
			</column>
			<column name="channel" type="INTEGER">
				<constraints nullable="false" />
			</column>
			<column name="type" type="INTEGER">
				<constraints nullable="false" />
			</column>
			<column name="int_value" type="INTEGER" />
			<column name="double_value" type="DOUBLE" />
		</createTable>
	</changeSet>
	
	<changeSet id="5" author="jonas">
		<createTable tableName="setting">
			<column name="id" type="INTEGER" autoIncrement="true">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="setting_key" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
			<column name="setting_value" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>
	
	<changeSet id="6" author="jonas">
		<createTable tableName="timer_trigger">
			<column name="id" type="INTEGER">
				<constraints nullable="false" references="trigger_abstract(id)" foreignKeyName="fk_timer_trigger-trigger_abstract" />
			</column>
			<column name="repeat_type" type="INTEGER">
				<constraints nullable="false" />
			</column>
			<column name="days" type="INTEGER">
				<constraints nullable="false" />
			</column>
			<column name="seconds_from_midnight" type="INTEGER">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>
	
	<changeSet id="7" author="jonas">
		<insert tableName="setting">
			<column name="setting_key" value="TELLSTICK_NEXT_HOUSE_VALUE" />
			<column name="setting_value" value="4763" />
		</insert>
		<insert tableName="setting">
			<column name="setting_key" value="SERVER_NAME" />
			<column name="setting_value" value="Homeki" />
		</insert>
	</changeSet>
	
</databaseChangeLog>